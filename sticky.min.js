'use strict';(function(g){function p(a){for(var c=1,d=arguments.length;c<d;c++){var b=arguments[c],e;for(e in b)a[e]=b[e]}return a}function h(a){var c={top:0,left:0,right:0,bottom:0,width:0,height:0},d=a.getBoundingClientRect();c.top=d.top+(window.pageYOffset||document.documentElement.scrollTop);c.left=d.left+(window.pageXOffset||document.documentElement.scrollLeft);c.width=a.offsetWidth;c.height=a.offsetHeight;c.right=document.width-d.right;c.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-
d.bottom;return c}function k(a,c){var d=getComputedStyle(c),b=h(c),e=0,f=0;"border-box"!==d["box-sizing"]&&(e=~~d.paddingLeft.slice(0,-2),f=~~d.paddingRight.slice(0,-2));a.style.width=b.width-e-f+"px";a.style.left=b.left+"px";for(b=a.style.marginLeft=0;b<l.length;b++)for(e=0;e<m.length;e++)f=l[b]+m[e],a.style[f]=d[f]}function f(){this.create.apply(this,arguments)}var n=["object","iframe","embed","img"],m=["left","top","right","bottom"],l=["padding-","border-"];f.list=[];f.p=[];f.stack={};f.prototype=
{options:{offset:0,restrictWithin:null,vAlign:"top",stickyClass:"is-stuck",stubClass:"sticky-stub",stack:null,collapse:!0},create:function(a,c){if(void 0===a.getAttribute("data-sticky-id"))return console.log("Sticky already exist");this.a=a;this.parent=this.a.parentNode;var d=a.dataset;d||(d={},a.getAttribute("data-restrict-within")&&(d.restrictWithin=a.getAttribute("data-restrict-within")),a.getAttribute("data-offset")&&(d.offset=a.getAttribute("data-offset")),a.getAttribute("data-stack")&&(d.stack=
a.getAttribute("data-stack")),a.getAttribute("data-sticky-class")&&(d.stickyClass=a.getAttribute("data-sticky-class")));this.options=p({},this.options,d,c);this.restrictWithin="string"===typeof this.options.restrictWithin&&this.options.restrictWithin.trim()?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;this.a.setAttribute("data-sticky-id",f.list.length);this.id=f.list.length;f.list.push(this);this.d=this.k=!1;this.e=!0;this.c={top:0,bottom:9999};this.height=
0;this.l={top:0,height:0};this.options.offset=parseFloat(this.options.offset)||0;this.offset={top:0,bottom:0};this.g=[];this.stack=[];if(this.options.stack)for(var d=this.options.stack.split(","),b=d.length;b--;)d[b]=d[b].trim(),f.stack[d[b]]||(f.stack[d[b]]=[]),this.g[b]=f.stack[d[b]].length,this.stack.push(d[b]),f.stack[d[b]].push(this);else this.g[0]=f.p.length,f.p.push(this);this.b=this.a.cloneNode();this.b.classList.add(this.options.stubClass);this.b.style.visibility="hidden";this.b.style.display=
"none";this.b.removeAttribute("hidden");this.j=this.a.style.cssText;this.o=getComputedStyle(this.a).display;"static"==getComputedStyle(this.parent).position&&(this.parent.style.position="relative");this.h=this.h.bind(this);this.recalc=this.recalc.bind(this);this.disable=this.disable.bind(this);this.enable=this.enable.bind(this);this.n=this.n.bind(this);this.m=this.m.bind(this);document.addEventListener("sticky:recalc",this.recalc);this.a.addEventListener("sticky:recalc",this.recalc);this.a.addEventListener("DOMNodeRemoved",
this.disable);this.a.addEventListener("DOMNodeInserted",this.enable);this.a.addEventListener("sticky:disable",this.disable);this.a.addEventListener("sticky:enable",this.enable);"none"===this.o?(this.o="block",this.disable()):this.enable()},disable:function(){this.b.parentNode&&this.parent.removeChild(this.b);this.w();document.dispatchEvent(new CustomEvent("sticky:recalc"))},enable:function(){this.b.parentNode||this.parent.insertBefore(this.b,this.a);this.n();this.recalc();document.dispatchEvent(new CustomEvent("sticky:recalc"))},
n:function(){document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc)},w:function(){document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc)},h:function(){var a=window.pageYOffset||document.documentElement.scrollTop;if(this.k)!this.e&&a+this.offset.top+this.options.offset+this.height+this.f+this.i>=this.c.bottom-this.offset.bottom&&this.t(),!this.d&&a+this.offset.top+this.options.offset+this.f<=this.c.top&&this.u();else if(this.e||this.d)a+
this.offset.top+this.options.offset+this.f>this.c.top?a+this.offset.top+this.options.offset+this.height+this.f+this.i<this.c.bottom-this.offset.bottom?this.q():this.d||(this.q(),this.t()):this.d&&(this.q(),this.u())},u:function(){this.a.style.cssText=this.j;this.a.classList.remove(this.options.stickyClass);this.b.style.display="none";this.k=!1;this.e=!0;this.d=!1},q:function(){this.b.style.display=this.o;this.s(this.a);this.k=!0;this.d=this.e=!1},t:function(){this.a.classList.remove(this.options.stickyClass);
this.r(this.a);this.k=!1;this.d=!0;this.e=!1},r:function(a){a.style.cssText=this.j;a.style.position="absolute";a.style.top=this.c.bottom-this.offset.bottom-this.l.top-this.height-this.f-this.i+"px";k(a,this.b);a.style.left=this.b.offsetLeft+"px"},s:function(a,c){a.style.cssText=this.j;a.style.position="fixed";a.style.top=this.offset.top+this.options.offset+"px";a.classList.add(this.options.stickyClass);k(a,c||this.b)},recalc:function(){var a=this.e?this.a:this.b;this.b.innerHTML=this.a.innerHTML;
var c=this.b;c.removeAttribute("id");for(var d=c.querySelectorAll("[id]"),b=0;b<d.length;b++)d[b].removeAttribute("id"),d[b].removeAttribute("name");for(d=0;d<n.length;d++)for(var b=c.querySelectorAll(n[d]),e=b.length;e--;)"SCRIPT"===b[e].tagName&&b[e].parentNode.replaceChild(b[e]),b[e].removeAttribute("src"),b[e].removeAttribute("href"),b[e].removeAttribute("rel"),b[e].removeAttribute("srcdoc");this.l=h(this.parent);this.height=this.a.offsetHeight;c=getComputedStyle(a);c.marginLeft.slice(0,-2);c.marginRight.slice(0,
-2);this.f=~~c.marginTop.slice(0,-2);this.i=~~c.marginBottom.slice(0,-2);this.restrictWithin instanceof Element?(c=h(this.restrictWithin),this.c.top=Math.max(c.top,h(a).top),this.c.bottom=this.restrictWithin.offsetHeight+c.top):this.restrictWithin instanceof Object?this.c=this.restrictWithin:(this.c.top=h(a).top,this.c.bottom=this.l.height+this.l.top);this.offset.bottom=0;this.offset.top=0;if(this.stack.length)for(d=this.stack.length;d--;){if(c=f.stack[this.stack[d]][this.g[d]-1]){b=c.e?c.a:c.b;this.offset.top=
c.offset.top+c.options.offset;if(!(e=!this.options.collapse))var e=a.offsetLeft,g=a.offsetLeft+a.offsetWidth,k=b.offsetLeft,b=b.offsetWidth+b.offsetLeft,e=g<k&&e<k||g>b&&e>b?!1:!0;if(e)for(this.offset.top+=c.height+Math.max(c.f,c.i),b=f.stack[this.stack[d]][this.g[d]],e=this.g[d]-1;c=f.stack[this.stack[d]][e];e--)c.offset.bottom=Math.max(c.offset.bottom,b.offset.bottom+b.height+b.f+b.i),b=c}}else if(c=f.p[this.g[0]-1])c.c.bottom=this.c.top-this.f;clearTimeout(this.v);this.v=setTimeout(this.m,0)},
m:function(){this.e?this.a.style.cssText=this.j:this.d?this.r(this.a):this.s(this.a);this.h()}};g?g.fn.sticky=function(a){return this.each(function(c,d){var b=g(d),e=new f(b[0],a);b.data("sticky",e)})}:window.Sticky=f})(window.jQuery||window.Zepto);
