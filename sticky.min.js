'use strict';(function(g){function k(a){for(var c=1,b=arguments.length;c<b;c++){var h=arguments[c],d;for(d in h)a[d]=h[d]}return a}function l(a){var c={},b,d;for(d in a.dataset){b=a.dataset[d];var e=void 0;b="true"===b?!0:"false"===b?!1:isNaN(e=parseFloat(b))?b:e;""===b&&(b[i]=!0);c[d]=b}return c}function e(a){var c={top:0,left:0,right:0,bottom:0,width:0,height:0},b=a.getBoundingClientRect();c.top=b.top+(window.pageYOffset||document.documentElement.scrollTop);c.left=b.left+(window.pageXOffset||document.documentElement.scrollLeft);
c.width=a.offsetWidth;c.height=a.offsetHeight;c.right=document.width-b.right;c.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-b.bottom;return c}function f(){this.create.apply(this)}function d(){this.create.apply(this,arguments)}f.prototype={options:{L:10},create:function(){this.r={top:window.pageYOffset||document.documentElement.scrollTop,height:window.innerHeight};this.p=[];this.d=this.d.bind(this);this.recalc=this.recalc.bind(this);this.l=this.l.bind(this);this.G()},
G:function(){window.addEventListener("resize",this.l);document.addEventListener("scroll",this.d);document.addEventListener("sticky:recalc",this.recalc)},d:function(){this.r.top=window.pageYOffset||document.documentElement.scrollTop},l:function(){clearTimeout(this.t);this.t=setTimeout(this.recalc,this.options.L)},t:0,recalc:function(){this.r.height=window.innerHeight},add:function(a){this.p.push(a);a.a.D=this.p.length-1;this.l();return a}};var m=new f;d.h={NONE:0,s:1,m:2};d.prototype={options:{offset:0,
f:null,vAlign:"top",q:"is-stuck",K:"sticky-stub",mode:d.h.m},create:function(a,c){this.a=a;var b=l(this.a);"string"===typeof b.f&&(b.f=document.body.querySelector(b.f));this.options=k({},this.options,b,c);"string"===typeof this.options.mode&&(this.options.mode="stacked"==this.options.mode?d.h.s:"exclusive"==this.options.mode?d.h.m:d.h.NONE);this.o=m;this.o.add(this);this.i=this.g=!1;this.j=!0;this.b={top:0,bottom:9999};this.height=0;this.parent={top:0,height:0};for(b=this.a;null!==(b=b.previousSibling);)if(void 0!==
b.D){this.e=this.o.p[b.D];this.e.M=this;break}this.c=this.a.cloneNode(!0);this.c.classList.add(this.options.K);this.c.style.visibility="hidden";this.I=this.a.style.cssText;this.k=this.a.cloneNode(!0);this.F=document.createDocumentFragment();"static"==window.getComputedStyle(this.a.parentNode).position&&(this.a.parentNode.style.position="relative");this.d=this.d.bind(this);this.recalc=this.recalc.bind(this);document.addEventListener("scroll",this.d);window.addEventListener("resize",function(){this.recalc();
this.d()}.bind(this));this.recalc();this.H();this.d()},H:function(){var a=e(this.a);a.top<this.b.top?this.A():a.top+a.height>this.b.bottom?this.w():this.C()},d:function(){var a=this.o.r.top;this.g?(!this.j&&a+this.options.offset+this.height>=this.b.bottom&&this.w(),!this.i&&a+this.options.offset<=this.b.top&&this.A()):(this.j||this.i)&&a+this.options.offset>this.b.top&&a+this.options.offset+this.height<this.b.bottom&&this.C()},A:function(){this.c=this.a.parentNode.removeChild(this.c);this.u();this.a.classList.remove(this.options.q);
this.g=!1;this.j=!0;this.i=!1},C:function(){this.i?this.B(this.k):this.B(this.c,this.k);this.v(this.k,this.a);this.a=this.a.parentNode.replaceChild(this.F,this.a);this.v(this.a);this.k=this.c.parentNode.replaceChild(this.a,this.k);this.g=!0;this.i=this.j=!1},w:function(){this.a.classList.remove(this.options.q);this.J(this.a);this.g=!1;this.i=!0;this.j=!1},J:function(a){a.style.cssText="";a.style.position="absolute";a.style.top=this.b.bottom-this.parent.top-this.height+"px";this.n(a,this.c);var c=
getComputedStyle(this.c);a.style.right=c.right;a.style.left=c.left},v:function(a,c){a.style.cssText="";a.style.position="fixed";a.style.top=this.options.offset+"px";a.classList.add(this.options.q);this.n(a,c||this.c)},B:function(){for(var a=0;a<arguments.length;a++)this.F.appendChild(arguments[a])},recalc:function(){var a=this.g?this.c:this.a;this.parent=e(a.parentNode);this.height=a.offsetHeight;if(this.options.f instanceof Element){var c=e(this.options.f);this.b.top=Math.max(c.top,e(a).top);this.b.bottom=
this.options.f.offsetHeight+c.top}else this.options.f instanceof Object?this.b=this.options.f:(this.b.top=e(a).top,this.b.bottom=this.parent.height+this.parent.top);this.e&&this.options.mode===d.h.m&&(this.e.b.bottom=this.b.top);if(this.options.mode===d.h.s&&this.e)for(this.options.offset=this.e.options.offset+(this.e.g?this.e.c:this.e.a).offsetHeight,a=this;a=a.e;)a.b.bottom-=this.height;this.g?this.n(this.a,this.c):this.u()},n:function(a,c){var b=getComputedStyle(c),d=e(c);a.style.width=b.width;
"auto"!==b.left&&(a.style.left=d.left+"px");"auto"!==b.right&&(a.style.right=d.right+"px")},u:function(){this.a.style.cssText=this.I}};g&&(g.fn.sticky=function(a){return this.each(function(c,b){var e=g(b),f=new d(e[0],a);e.data("sticky",f)})})})(window.jQuery||window.Zepto);
