'use strict';(function(k){function q(a){for(var c=1,b=arguments.length;c<b;c++){var e=arguments[c],d;for(d in e)a[d]=e[d]}return a}function h(a){var c={top:0,left:0,right:0,bottom:0,width:0,height:0},b=a.getBoundingClientRect();c.top=b.top+(window.pageYOffset||document.documentElement.scrollTop);c.left=b.left+(window.pageXOffset||document.documentElement.scrollLeft);c.width=a.offsetWidth;c.height=a.offsetHeight;c.right=document.width-b.right;c.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-
b.bottom;return c}function l(a,c){var b=getComputedStyle(c),e=h(c),d=0,f=0;"border-box"!==b["box-sizing"]&&(d=~~b["padding-left"].slice(0,-2),f=~~b["padding-right"].slice(0,-2));a.style.width=e.width-d-f+"px";a.style.left=e.left+"px";for(e=0;e<m.length;e++)for(d=0;d<n.length;d++)f=m[e]+n[d],a.style[f]=b[f]}function g(){this.create.apply(this,arguments)}var p=["object","iframe","embed","img"],n=["left","top","right","bottom"],m=["padding-","border-"];g.list=[];g.prototype={options:{offset:0,g:null,
vAlign:"top",n:"is-stuck",A:"sticky-stub",mode:"stacked",t:!0,b:null},create:function(a,c){if(a.dataset.h)return console.log("Sticky already exist");this.a=a;this.parent=this.a.parentNode;this.options=q({},this.options,a.dataset,c);this.g="string"===typeof this.options.restrictWithin?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;this.options.offset=parseFloat(this.options.offset)||0;this.a.dataset.h=g.list.length;g.list.push(this);this.f=this.k=!1;this.e=!0;
this.c={top:0,bottom:9999};this.height=0;this.l={top:0,height:0};var b=this.a;if(this.options.b)b="string"===typeof this.options.b?document.querySelector(this.options.b):this.options.b,b.dataset.h&&g.list[b.dataset.h]&&(this.b=g.list[b.dataset.h],this.b.v=this);else for(;null!==(b=b.previousSibling);)if(1===b.nodeType&&void 0!==b.dataset.h){this.b=g.list[b.dataset.h];this.b.v=this;break}for(var b=this.a.cloneNode(!0),e=0;e<p.length;e++)for(var d=b.querySelectorAll(p[e]),f=d.length;f--;)d[f].removeAttribute("src"),
d[f].removeAttribute("href"),d[f].removeAttribute("rel"),d[f].removeAttribute("srcdoc"),"SCRIPT"===d[f].tagName&&d[f].parentNode.replaceChild(d[f]);this.d=b;this.d.classList.add(this.options.A);this.d.style.visibility="hidden";this.d.style.display="none";this.parent.insertBefore(this.d,this.a);this.j=this.a.style.cssText;this.u=getComputedStyle(this.a).display;"static"==window.getComputedStyle(this.parent).position&&(this.parent.style.position="relative");this.i=this.i.bind(this);this.recalc=this.recalc.bind(this);
this.m=this.m.bind(this);this.recalc();document.addEventListener("scroll",this.i);window.addEventListener("resize",this.recalc);document.addEventListener("sticky:recalc",this.recalc)},i:function(){var a=window.pageYOffset||document.documentElement.scrollTop;this.k?(!this.e&&a+this.options.offset+this.height>=this.c.bottom&&this.q(),!this.f&&a+this.options.offset<=this.c.top&&this.w()):(this.e||this.f)&&a+this.options.offset>this.c.top&&(a+this.options.offset+this.height<this.c.bottom?this.r():this.f||
(this.r(),this.q()))},w:function(){this.a.style.cssText=this.j;this.a.classList.remove(this.options.n);this.d.style.display="none";this.k=!1;this.e=!0;this.f=!1},r:function(){this.d.style.display=this.u;this.p(this.a);this.k=!0;this.f=this.e=!1},q:function(){this.a.classList.remove(this.options.n);this.o(this.a);this.k=!1;this.f=!0;this.e=!1},o:function(a){a.style.cssText=this.j;a.style.position="absolute";a.style.top=this.c.bottom-this.l.top-this.height+"px";l(a,this.d);a.style.left=this.d.offsetLeft+
"px"},p:function(a,c){a.style.cssText=this.j;a.style.position="fixed";a.style.top=this.options.offset+"px";a.classList.add(this.options.n);l(a,c||this.d)},recalc:function(){var a=this.e?this.a:this.d;this.l=h(this.parent);this.height=a.offsetHeight;if(this.g instanceof Element){var c=h(this.g);this.c.top=Math.max(c.top,h(a).top);this.c.bottom=this.g.offsetHeight+c.top}else this.g instanceof Object?this.c=this.g:(this.c.top=h(a).top,this.c.bottom=this.l.height+this.l.top);if(this.b)if("exclusive"===
this.options.mode)this.b.c.bottom=this.c.top;else if("stacked"===this.options.mode){var c=this.b.e?this.b.a:this.b.d,b;if(b=this.options.t){b=a.offsetLeft;var a=a.offsetLeft+a.offsetWidth,e=c.offsetLeft,d=c.offsetWidth+c.offsetLeft;b=!!(a<e&&b<e||a>d&&b>d)}if(b)this.options.offset=this.b.options.offset;else for(this.options.offset=this.b.options.offset+c.offsetHeight,c=this;c=c.b;)c.c.bottom-=this.height}clearTimeout(this.s);this.s=setTimeout(this.m,0)},m:function(){this.e?this.a.style.cssText=this.j:
this.f?this.o(this.a):this.p(this.a);this.i()}};k?k.fn.sticky=function(a){return this.each(function(c,b){var e=k(b),d=new g(e[0],a);e.data("sticky",d)})}:window.Sticky=g})(window.jQuery||window.Zepto);
