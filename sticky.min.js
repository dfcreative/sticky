'use strict';(function(g){function p(a){for(var b=1,d=arguments.length;b<d;b++){var c=arguments[b],f;for(f in c)a[f]=c[f]}return a}function h(a){var b={top:0,left:0,right:0,bottom:0,width:0,height:0},d=a.getBoundingClientRect();b.top=d.top+(window.pageYOffset||document.documentElement.scrollTop);b.left=d.left+(window.pageXOffset||document.documentElement.scrollLeft);b.width=a.offsetWidth;b.height=a.offsetHeight;b.right=document.width-d.right;b.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-
d.bottom;return b}function k(a,b){var d=getComputedStyle(b),c=h(b),f=0,e=0;"border-box"!==d["box-sizing"]&&(f=~~d.paddingLeft.slice(0,-2),e=~~d.paddingRight.slice(0,-2));a.style.width=c.width-f-e+"px";a.style.left=c.left+"px";for(c=a.style.marginLeft=0;c<l.length;c++)for(f=0;f<m.length;f++)e=l[c]+m[f],a.style[e]=d[e]}function e(a,b){if(void 0===a.getAttribute("data-sticky-id"))return console.log("Sticky already exist");this.a=a;this.parent=this.a.parentNode;var d=a.dataset;d||(d={},a.getAttribute("data-restrict-within")&&
(d.restrictWithin=a.getAttribute("data-restrict-within")),a.getAttribute("data-offset")&&(d.offset=a.getAttribute("data-offset")),a.getAttribute("data-stack")&&(d.stack=a.getAttribute("data-stack")),a.getAttribute("data-sticky-class")&&(d.stickyClass=a.getAttribute("data-sticky-class")));this.options=p({},this.options,d,b);this.restrictWithin="string"===typeof this.options.restrictWithin&&this.options.restrictWithin.trim()?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;
this.a.setAttribute("data-sticky-id",e.list.length);this.id=e.list.length;e.list.push(this);this.d=this.i=!1;this.c=!0;this.o();this.e={top:0,bottom:9999};this.height=0;this.n={top:0,height:0};this.options.offset=parseFloat(this.options.offset)||0;this.offset={top:0,bottom:0};this.f=0;this.k=[];this.stack=[];if(this.options.stack)for(var d=this.options.stack.split(","),c=d.length;c--;)d[c]=d[c].trim(),e.stack[d[c]]||(e.stack[d[c]]=[]),this.k[c]=e.stack[d[c]].length,this.stack.push(d[c]),e.stack[d[c]].push(this);
else this.k[0]=e.C.length,e.C.push(this);this.b=this.a.cloneNode();this.b.classList.add(this.options.stubClass);this.b.style.visibility="hidden";this.b.style.display="none";this.b.removeAttribute("hidden");this.q=this.a.style.cssText;this.B=getComputedStyle(this.a).display;"static"==getComputedStyle(this.parent).position&&(this.parent.style.position="relative");this.m=this.m.bind(this);this.recalc=this.recalc.bind(this);this.v=this.v.bind(this);this.disable=this.disable.bind(this);this.enable=this.enable.bind(this);
this.A=this.A.bind(this);this.w=this.w.bind(this);this.D=this.D.bind(this);this.l=this.l.bind(this);this.F=this.F.bind(this);this.t=this.t.bind(this);this.p=this.p.bind(this);this.r=this.r.bind(this);this.u=this.u.bind(this);document.addEventListener("sticky:recalc",this.recalc);this.a.addEventListener("sticky:recalc",this.recalc);this.a.addEventListener("DOMNodeRemoved",this.disable);this.a.addEventListener("DOMNodeInserted",this.enable);this.a.addEventListener("sticky:disable",this.disable);this.a.addEventListener("sticky:enable",
this.enable);"none"===this.B?(this.B="block",this.disable()):this.enable()}var n=["object","iframe","embed","img"],m=["left","top","right","bottom"],l=["padding-","border-"];e.list=[];e.C=[];e.stack={};e.s={};e.prototype={options:{offset:0,restrictWithin:null,vAlign:"top",stubClass:"sticky-stub",stickyClass:"is-stuck",bottomClass:"is-bottom",topClass:"is-top",stack:null,collapse:!0,O:20},disable:function(){this.b.parentNode&&this.parent.removeChild(this.b);this.P();document.dispatchEvent(new CustomEvent("sticky:recalc"))},
enable:function(){this.b.parentNode||this.parent.insertBefore(this.b,this.a);this.A();this.recalc();document.dispatchEvent(new CustomEvent("sticky:recalc"))},A:function(){document.addEventListener("scroll",this.m);window.addEventListener("resize",this.recalc);this.a.addEventListener("mouseover",this.r);this.a.addEventListener("mouseout",this.u)},P:function(){document.removeEventListener("scroll",this.m);window.removeEventListener("resize",this.recalc);this.a.removeEventListener("mouseover",this.r);
this.a.removeEventListener("mouseout",this.u)},m:function(){var a=window.pageYOffset||document.documentElement.scrollTop;if(this.i)!this.c&&a+this.offset.top+this.options.offset+this.height+this.g+this.j+this.f>=this.e.bottom-this.offset.bottom&&this.K(),!this.d&&a+this.offset.top+this.options.offset+this.g+this.f<=this.e.top&&this.L();else if(this.c||this.d)a+this.offset.top+this.options.offset+this.g>this.e.top?a+this.offset.top+this.options.offset+this.height+this.g+this.j<this.e.bottom-this.offset.bottom?
this.l():this.d||(this.l(),this.K()):this.d&&(this.l(),this.L())},L:function(){this.a.style.cssText=this.q;this.b.style.display="none";this.f=0;this.i=!1;this.c=!0;this.d=!1;this.o();this.h=!0},D:function(){this.d=this.c=this.i=!1;this.o();this.h=!0;this.I((window.pageYOffset||document.documentElement.scrollTop)+this.offset.top-this.n.top+this.f)},l:function(){this.b.style.display=this.B;this.J();this.i=!0;this.d=this.c=!1;this.o();this.h=!1},K:function(){this.H();this.f=0;this.i=!1;this.d=!0;this.c=
!1;this.o();this.h=!0},F:function(){for(var a=e.stack[this.stack[0]],b=0;b<a.length;b++)a[b].D()},t:function(){for(var a=e.stack[this.stack[0]],b=0;b<a.length;b++)a[b].l()},r:function(){var a=e.stack[this.stack[0]],b=a[a.length-1];a[0].c||b.c||e.s[this.stack[0]]<=window.innerHeight&&0<=this.f||(this.G=(window.pageYOffset||document.documentElement.scrollTop)+this.f,document.addEventListener("scroll",this.p))},u:function(){var a=e.stack[this.stack[0]],b=a[a.length-1],a=a[0];document.removeEventListener("scroll",
this.p);a.c||a.d||b.c||b.d||this.h&&this.t()},p:function(){var a=this.G-(window.pageYOffset||document.documentElement.scrollTop),b=e.stack[this.stack[0]],d=b[b.length-1],c=b[0];if(!(c.c||c.d||d.c||d.d)){c=d=!1;a<window.innerHeight-e.s[this.stack[0]]?(a=window.innerHeight-e.s[this.stack[0]],this.G=(window.pageYOffset||document.documentElement.scrollTop)+a,d=!0):0<a?(a=0,this.G=window.pageYOffset||document.documentElement.scrollTop,d=!0):this.h||(c=!0);for(var f=0;f<b.length;f++)b[f].f=a;if(d&&this.h)return this.t();
if(c&&!this.h)return this.F()}},I:function(a){this.a.style.cssText=this.q;this.a.style.position="absolute";this.a.style.top=a+"px";k(this.a,this.b);this.a.style.left=this.b.offsetLeft+"px"},H:function(){this.I(this.e.bottom-this.offset.bottom-this.n.top-this.height-this.g-this.j)},J:function(){this.a.style.cssText=this.q;this.a.style.position="fixed";this.a.style.top=this.offset.top+this.options.offset+this.f+"px";k(this.a,this.b)},o:function(){this.c?this.a.classList.add(this.options.topClass):this.a.classList.remove(this.options.topClass);
this.i?this.a.classList.add(this.options.stickyClass):this.a.classList.remove(this.options.stickyClass);this.d?this.a.classList.add(this.options.bottomClass):this.a.classList.remove(this.options.bottomClass)},recalc:function(){clearTimeout(this.M);this.M=setTimeout(this.v,this.options.O)},v:function(){var a=this.c?this.a:this.b;this.b.innerHTML=this.a.innerHTML;var b=this.b;b.removeAttribute("id");for(var d=b.querySelectorAll("[id]"),c=0;c<d.length;c++)d[c].removeAttribute("id"),d[c].removeAttribute("name");
for(d=0;d<n.length;d++)for(var c=b.querySelectorAll(n[d]),f=c.length;f--;)"SCRIPT"===c[f].tagName&&c[f].parentNode.replaceChild(c[f]),c[f].removeAttribute("src"),c[f].removeAttribute("href"),c[f].removeAttribute("rel"),c[f].removeAttribute("srcdoc");this.n=h(this.parent);this.height=this.a.offsetHeight;b=getComputedStyle(a);b.marginLeft.slice(0,-2);b.marginRight.slice(0,-2);this.g=~~b.marginTop.slice(0,-2);this.j=~~b.marginBottom.slice(0,-2);this.f=0;this.restrictWithin instanceof Element?(b=h(this.restrictWithin),
this.e.top=Math.max(b.top,h(a).top),this.e.bottom=this.restrictWithin.offsetHeight+b.top):this.restrictWithin instanceof Object?this.e=this.restrictWithin:(this.e.top=h(a).top,this.e.bottom=this.n.height+this.n.top);this.offset.bottom=0;this.offset.top=0;if(this.stack.length)for(d=this.stack.length;d--;){if(b=e.stack[this.stack[d]][this.k[d]-1]){c=b.c?b.a:b.b;this.offset.top=b.offset.top+b.options.offset;if(!(f=!this.options.collapse))var f=a.offsetLeft,g=a.offsetLeft+a.offsetWidth,k=c.offsetLeft,
c=c.offsetWidth+c.offsetLeft,f=g<k&&f<k||g>c&&f>c?!1:!0;if(f)for(this.offset.top+=b.height+Math.max(b.g,b.j),c=e.stack[this.stack[d]][this.k[d]],f=this.k[d]-1;b=e.stack[this.stack[d]][f];f--)b.offset.bottom=Math.max(b.offset.bottom,c.offset.bottom+c.height+c.g+c.j),c=b}e.s[this.stack[d]]=this.offset.top+this.height+this.g+this.j}else if(b=e.C[this.k[0]-1])b.e.bottom=this.e.top-this.g;clearTimeout(this.N);this.N=setTimeout(this.w,0)},w:function(){this.c?this.a.style.cssText=this.q:this.d?this.H():
this.J();this.m()}};g?g.fn.sticky=function(a){return this.each(function(b,d){var c=g(d),f=new e(c[0],a);c.data("sticky",f)})}:window.Sticky=e})(window.jQuery||window.Zepto);
