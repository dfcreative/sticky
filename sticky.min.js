'use strict';(function(h){function q(a){for(var b=1,d=arguments.length;b<d;b++){var c=arguments[b],e;for(e in c)a[e]=c[e]}return a}function k(a){var b={top:0,left:0,right:0,bottom:0,width:0,height:0},d=a.getBoundingClientRect();b.top=d.top+(window.pageYOffset||document.documentElement.scrollTop);b.left=d.left+(window.pageXOffset||document.documentElement.scrollLeft);b.width=a.offsetWidth;b.height=a.offsetHeight;b.right=document.width-d.right;b.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-
d.bottom;return b}function l(a,b){var d=getComputedStyle(b),c=k(b),e=0,f=0;"border-box"!==d["box-sizing"]&&(e=~~d.paddingLeft.slice(0,-2),f=~~d.paddingRight.slice(0,-2));a.style.width=c.width-e-f+"px";a.style.left=c.left+"px";for(c=a.style.marginLeft=0;c<m.length;c++)for(e=0;e<n.length;e++)f=m[c]+n[e],a.style[f]=d[f]}function f(){this.create.apply(this,arguments)}var p=["object","iframe","embed","img"],n=["left","top","right","bottom"],m=["padding-","border-"];f.list=[];f.o=[];f.stack={};f.prototype=
{options:{offset:0,restrictWithin:null,vAlign:"top",stickyClass:"is-stuck",stubClass:"sticky-stub",stack:null,collapse:!0},create:function(a,b){if(a.dataset&&a.dataset.stickyId)return console.log("Sticky already exist");this.a=a;this.parent=this.a.parentNode;this.options=q({},this.options,a.dataset,b);this.restrictWithin="string"===typeof this.options.restrictWithin&&this.options.restrictWithin.trim()?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;this.a.dataset||
(this.a.dataset={});this.id=this.a.dataset.stickyId=f.list.length;f.list.push(this);this.d=this.l=!1;this.e=!0;this.c={top:0,bottom:9999};this.height=0;this.m={top:0,height:0};this.options.offset=parseFloat(this.options.offset)||0;this.offset={top:0,bottom:0};this.g=[];this.stack=[];if(this.options.stack)for(var d=this.options.stack.split(","),c=d.length;c--;)d[c]=d[c].trim(),f.stack[d[c]]||(f.stack[d[c]]=[]),this.g[c]=f.stack[d[c]].length,this.stack.push(d[c]),f.stack[d[c]].push(this);else this.g[0]=
f.o.length,f.o.push(this);d=this.a.cloneNode(!0);for(c=0;c<p.length;c++)for(var e=d.querySelectorAll(p[c]),g=e.length;g--;)e[g].removeAttribute("src"),e[g].removeAttribute("href"),e[g].removeAttribute("rel"),e[g].removeAttribute("srcdoc"),"SCRIPT"===e[g].tagName&&e[g].parentNode.replaceChild(e[g]);this.b=d;this.b.classList.add(this.options.stubClass);this.b.style.visibility="hidden";this.b.style.display="none";this.parent.insertBefore(this.b,this.a);this.k=this.a.style.cssText;this.v=getComputedStyle(this.a).display;
"static"==getComputedStyle(this.parent).position&&(this.parent.style.position="relative");this.h=this.h.bind(this);this.recalc=this.recalc.bind(this);this.disable=this.disable.bind(this);this.enable=this.enable.bind(this);this.j=this.j.bind(this);this.n=this.n.bind(this);this.recalc();this.j();document.addEventListener("sticky:recalc",this.recalc);this.a.addEventListener("sticky:disable",this.disable);this.a.addEventListener("sticky:enable",this.enable)},disable:function(){this.parent.removeChild(this.b);
this.w();document.dispatchEvent(new CustomEvent("sticky:recalc"))},enable:function(){this.parent.insertBefore(this.b,this.a);this.j()},j:function(){document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc);this.a.addEventListener("DOMNodeRemoved",this.disable)},w:function(){document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc);this.a.addEventListener("DOMNodeRemoved",this.disable)},h:function(){var a=window.pageYOffset||document.documentElement.scrollTop;
if(this.l)!this.e&&a+this.offset.top+this.options.offset+this.height+this.f+this.i>=this.c.bottom-this.offset.bottom&&this.s(),!this.d&&a+this.offset.top+this.options.offset+this.f<=this.c.top&&this.t();else if(this.e||this.d)a+this.offset.top+this.options.offset+this.f>this.c.top?a+this.offset.top+this.options.offset+this.height+this.f+this.i<this.c.bottom-this.offset.bottom?this.p():this.d||(this.p(),this.s()):this.d&&(this.p(),this.t())},t:function(){this.a.style.cssText=this.k;this.a.classList.remove(this.options.stickyClass);
this.b.style.display="none";this.l=!1;this.e=!0;this.d=!1},p:function(){this.b.style.display=this.v;this.r(this.a);this.l=!0;this.d=this.e=!1},s:function(){this.a.classList.remove(this.options.stickyClass);this.q(this.a);this.l=!1;this.d=!0;this.e=!1},q:function(a){a.style.cssText=this.k;a.style.position="absolute";a.style.top=this.c.bottom-this.offset.bottom-this.m.top-this.height-this.f-this.i+"px";l(a,this.b);a.style.left=this.b.offsetLeft+"px"},r:function(a,b){a.style.cssText=this.k;a.style.position=
"fixed";a.style.top=this.offset.top+this.options.offset+"px";a.classList.add(this.options.stickyClass);l(a,b||this.b)},recalc:function(){var a=this.e?this.a:this.b;this.m=k(this.parent);this.height=this.a.offsetHeight;var b=getComputedStyle(a);b.marginLeft.slice(0,-2);b.marginRight.slice(0,-2);this.f=~~b.marginTop.slice(0,-2);this.i=~~b.marginBottom.slice(0,-2);this.restrictWithin instanceof Element?(b=k(this.restrictWithin),this.c.top=Math.max(b.top,k(a).top),this.c.bottom=this.restrictWithin.offsetHeight+
b.top):this.restrictWithin instanceof Object?this.c=this.restrictWithin:(this.c.top=k(a).top,this.c.bottom=this.m.height+this.m.top);this.offset.bottom=0;this.offset.top=0;if(this.stack.length)for(var d=this.stack.length;d--;){if(b=f.stack[this.stack[d]][this.g[d]-1]){var c=b.e?b.a:b.b;this.offset.top=b.offset.top+b.options.offset;var e;if(!(e=!this.options.collapse)){e=a.offsetLeft;var g=a.offsetLeft+a.offsetWidth,h=c.offsetLeft,c=c.offsetWidth+c.offsetLeft;e=g<h&&e<h||g>c&&e>c?!1:!0}if(e)for(this.offset.top+=
b.height+Math.max(b.f,b.i),c=f.stack[this.stack[d]][this.g[d]],e=this.g[d]-1;b=f.stack[this.stack[d]][e];e--)b.offset.bottom=Math.max(b.offset.bottom,c.offset.bottom+c.height+c.f+c.i),c=b}}else if(b=f.o[this.g[0]-1])b.c.bottom=this.c.top-this.f;clearTimeout(this.u);this.u=setTimeout(this.n,0)},n:function(){this.e?this.a.style.cssText=this.k:this.d?this.q(this.a):this.r(this.a);this.h()}};h?h.fn.sticky=function(a){return this.each(function(b,d){var c=h(d),e=new f(c[0],a);c.data("sticky",e)})}:window.Sticky=
f})(window.jQuery||window.Zepto);
