'use strict';(function(k){function q(a){for(var b=1,c=arguments.length;b<c;b++){var e=arguments[b],d;for(d in e)a[d]=e[d]}return a}function h(a){var b={top:0,left:0,right:0,bottom:0,width:0,height:0},c=a.getBoundingClientRect();b.top=c.top+(window.pageYOffset||document.documentElement.scrollTop);b.left=c.left+(window.pageXOffset||document.documentElement.scrollLeft);b.width=a.offsetWidth;b.height=a.offsetHeight;b.right=document.width-c.right;b.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-
c.bottom;return b}function l(a,b){var c=getComputedStyle(b),e=h(b),d=0,f=0;"border-box"!==c["box-sizing"]&&(d=~~c["padding-left"].slice(0,-2),f=~~c["padding-right"].slice(0,-2));a.style.width=e.width-d-f+"px";a.style.left=e.left+"px";for(e=0;e<m.length;e++)for(d=0;d<n.length;d++)f=m[e]+n[d],a.style[f]=c[f]}function g(){this.create.apply(this,arguments)}var p=["object","iframe","embed","img"],n=["left","top","right","bottom"],m=["padding-","border-"];g.list=[];g.prototype={options:{offset:0,g:null,
vAlign:"top",l:"is-stuck",w:"sticky-stub",mode:"stacked",t:!0},create:function(a,b){this.a=a;this.parent=this.a.parentNode;this.options=q({},this.options,a.dataset,b);this.g="string"===typeof this.options.restrictWithin?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;this.options.offset=parseFloat(this.options.offset)||0;this.a.r=g.list.length;g.list.push(this);this.f=this.i=!1;this.e=!0;this.b={top:0,bottom:9999};this.height=0;this.j={top:0,height:0};for(var c=
this.a;null!==(c=c.previousSibling);)if(void 0!==c.r){this.d=g.list[c.r];this.d.A=this;break}for(var c=this.a.cloneNode(!0),e=0;e<p.length;e++)for(var d=c.querySelectorAll(p[e]),f=d.length;f--;)d[f].removeAttribute("src"),d[f].removeAttribute("href"),d[f].removeAttribute("rel"),d[f].removeAttribute("srcdoc"),"SCRIPT"===d[f].tagName&&d[f].parentNode.replaceChild(d[f]);this.c=c;this.c.classList.add(this.options.w);this.c.style.visibility="hidden";this.c.style.display="none";this.parent.insertBefore(this.c,
this.a);this.m=this.a.style.cssText;this.u=getComputedStyle(this.a).display;"static"==window.getComputedStyle(this.parent).position&&(this.parent.style.position="relative");this.h=this.h.bind(this);this.recalc=this.recalc.bind(this);this.k=this.k.bind(this);this.recalc();document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc);document.addEventListener("sticky:recalc",this.recalc)},h:function(){var a=window.pageYOffset||document.documentElement.scrollTop;this.i?(!this.e&&
a+this.options.offset+this.height>=this.b.bottom&&this.p(),!this.f&&a+this.options.offset<=this.b.top&&this.v()):(this.e||this.f)&&a+this.options.offset>this.b.top&&(a+this.options.offset+this.height<this.b.bottom?this.q():this.f||(this.q(),this.p()))},v:function(){this.a.style.cssText=this.m;this.a.classList.remove(this.options.l);this.c.style.display="none";this.i=!1;this.e=!0;this.f=!1},q:function(){this.c.style.display=this.u;this.o(this.a);this.i=!0;this.f=this.e=!1},p:function(){this.a.classList.remove(this.options.l);
this.n(this.a);this.i=!1;this.f=!0;this.e=!1},n:function(a){a.style.cssText="";a.style.position="absolute";a.style.top=this.b.bottom-this.j.top-this.height+"px";l(a,this.c);a.style.left=this.c.offsetLeft+"px"},o:function(a,b){a.style.cssText="";a.style.position="fixed";a.style.top=this.options.offset+"px";a.classList.add(this.options.l);l(a,b||this.c)},recalc:function(){var a=this.e?this.a:this.c;this.j=h(this.parent);this.height=a.offsetHeight;if(this.g instanceof Element){var b=h(this.g);this.b.top=
Math.max(b.top,h(a).top);this.b.bottom=this.g.offsetHeight+b.top}else this.g instanceof Object?this.b=this.g:(this.b.top=h(a).top,this.b.bottom=this.j.height+this.j.top);if(this.d)if("exclusive"===this.options.mode)this.d.b.bottom=this.b.top;else if("stacked"===this.options.mode){var b=this.d.e?this.d.a:this.d.c,c;if(c=this.options.t){c=a.offsetLeft;var a=a.offsetLeft+a.offsetWidth,e=b.offsetLeft,d=b.offsetWidth+b.offsetLeft;c=!!(a<e&&c<e||a>d&&c>d)}if(c)this.options.offset=this.d.options.offset;
else for(this.options.offset=this.d.options.offset+b.offsetHeight,b=this;b=b.d;)b.b.bottom-=this.height}clearTimeout(this.s);this.s=setTimeout(this.k,0)},k:function(){this.e?this.a.style.cssText=this.m:this.f?this.n(this.a):this.o(this.a);this.h()}};k?k.fn.sticky=function(a){return this.each(function(b,c){var e=k(c),d=new g(e[0],a);e.data("sticky",d)})}:window.Sticky=g})(window.jQuery||window.Zepto);
