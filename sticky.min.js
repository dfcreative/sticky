'use strict';(function(g){function p(b){for(var c=1,d=arguments.length;c<d;c++){var a=arguments[c],e;for(e in a)b[e]=a[e]}return b}function h(b){var c={top:0,left:0,right:0,bottom:0,width:0,height:0},d=b.getBoundingClientRect();c.top=d.top+(window.pageYOffset||document.documentElement.scrollTop);c.left=d.left+(window.pageXOffset||document.documentElement.scrollLeft);c.width=b.offsetWidth;c.height=b.offsetHeight;c.right=document.width-d.right;c.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-
d.bottom;return c}function k(b,c){var d=getComputedStyle(c),a=h(c),e=0,f=0;"border-box"!==d["box-sizing"]&&(e=~~d.paddingLeft.slice(0,-2),f=~~d.paddingRight.slice(0,-2));b.style.width=a.width-e-f+"px";b.style.left=a.left+"px";for(a=b.style.marginLeft=0;a<l.length;a++)for(e=0;e<m.length;e++)f=l[a]+m[e],b.style[f]=d[f]}function f(){this.create.apply(this,arguments)}var n=["object","iframe","embed","img"],m=["left","top","right","bottom"],l=["padding-","border-"];f.list=[];f.q=[];f.stack={};f.prototype=
{options:{offset:0,restrictWithin:null,vAlign:"top",stubClass:"sticky-stub",stickyClass:"is-stuck",bottomClass:"is-bottom",topClass:"is-top",stack:null,collapse:!0,C:20},create:function(b,c){if(void 0===b.getAttribute("data-sticky-id"))return console.log("Sticky already exist");this.a=b;this.parent=this.a.parentNode;var d=b.dataset;d||(d={},b.getAttribute("data-restrict-within")&&(d.restrictWithin=b.getAttribute("data-restrict-within")),b.getAttribute("data-offset")&&(d.offset=b.getAttribute("data-offset")),
b.getAttribute("data-stack")&&(d.stack=b.getAttribute("data-stack")),b.getAttribute("data-sticky-class")&&(d.stickyClass=b.getAttribute("data-sticky-class")));this.options=p({},this.options,d,c);this.restrictWithin="string"===typeof this.options.restrictWithin&&this.options.restrictWithin.trim()?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;this.a.setAttribute("data-sticky-id",f.list.length);this.id=f.list.length;f.list.push(this);this.d=this.i=!1;this.e=!0;
this.c={top:0,bottom:9999};this.height=0;this.l={top:0,height:0};this.options.offset=parseFloat(this.options.offset)||0;this.offset={top:0,bottom:0};this.g=[];this.stack=[];if(this.options.stack)for(var d=this.options.stack.split(","),a=d.length;a--;)d[a]=d[a].trim(),f.stack[d[a]]||(f.stack[d[a]]=[]),this.g[a]=f.stack[d[a]].length,this.stack.push(d[a]),f.stack[d[a]].push(this);else this.g[0]=f.q.length,f.q.push(this);this.b=this.a.cloneNode();this.b.classList.add(this.options.stubClass);this.b.style.visibility=
"hidden";this.b.style.display="none";this.b.removeAttribute("hidden");this.k=this.a.style.cssText;this.p=getComputedStyle(this.a).display;"static"==getComputedStyle(this.parent).position&&(this.parent.style.position="relative");this.h=this.h.bind(this);this.recalc=this.recalc.bind(this);this.m=this.m.bind(this);this.disable=this.disable.bind(this);this.enable=this.enable.bind(this);this.o=this.o.bind(this);this.n=this.n.bind(this);document.addEventListener("sticky:recalc",this.recalc);this.a.addEventListener("sticky:recalc",
this.recalc);this.a.addEventListener("DOMNodeRemoved",this.disable);this.a.addEventListener("DOMNodeInserted",this.enable);this.a.addEventListener("sticky:disable",this.disable);this.a.addEventListener("sticky:enable",this.enable);"none"===this.p?(this.p="block",this.disable()):this.enable()},disable:function(){this.b.parentNode&&this.parent.removeChild(this.b);this.D();document.dispatchEvent(new CustomEvent("sticky:recalc"))},enable:function(){this.b.parentNode||this.parent.insertBefore(this.b,this.a);
this.o();this.recalc();document.dispatchEvent(new CustomEvent("sticky:recalc"))},o:function(){document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc)},D:function(){document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc)},h:function(){var b=window.pageYOffset||document.documentElement.scrollTop;if(this.i)!this.e&&b+this.offset.top+this.options.offset+this.height+this.f+this.j>=this.c.bottom-this.offset.bottom&&this.v(),!this.d&&b+this.offset.top+
this.options.offset+this.f<=this.c.top&&this.w();else if(this.e||this.d)b+this.offset.top+this.options.offset+this.f>this.c.top?b+this.offset.top+this.options.offset+this.height+this.f+this.j<this.c.bottom-this.offset.bottom?this.r():this.d||(this.r(),this.v()):this.d&&(this.r(),this.w())},w:function(){this.a.style.cssText=this.k;this.b.style.display="none";this.i=!1;this.e=!0;this.d=!1;this.s()},r:function(){this.b.style.display=this.p;this.u(this.a);this.i=!0;this.d=this.e=!1;this.s()},v:function(){this.t(this.a);
this.i=!1;this.d=!0;this.e=!1;this.s()},t:function(b){b.style.cssText=this.k;b.style.position="absolute";b.style.top=this.c.bottom-this.offset.bottom-this.l.top-this.height-this.f-this.j+"px";k(b,this.b);b.style.left=this.b.offsetLeft+"px"},u:function(b,c){b.style.cssText=this.k;b.style.position="fixed";b.style.top=this.offset.top+this.options.offset+"px";k(b,c||this.b)},s:function(){this.e?this.a.classList.add(this.options.topClass):this.a.classList.remove(this.options.topClass);this.i?this.a.classList.add(this.options.stickyClass):
this.a.classList.remove(this.options.stickyClass);this.d?this.a.classList.add(this.options.bottomClass):this.a.classList.remove(this.options.bottomClass)},recalc:function(){clearTimeout(this.A);this.A=setTimeout(this.m,this.options.C)},m:function(){var b=this.e?this.a:this.b;this.b.innerHTML=this.a.innerHTML;var c=this.b;c.removeAttribute("id");for(var d=c.querySelectorAll("[id]"),a=0;a<d.length;a++)d[a].removeAttribute("id"),d[a].removeAttribute("name");for(d=0;d<n.length;d++)for(var a=c.querySelectorAll(n[d]),
e=a.length;e--;)"SCRIPT"===a[e].tagName&&a[e].parentNode.replaceChild(a[e]),a[e].removeAttribute("src"),a[e].removeAttribute("href"),a[e].removeAttribute("rel"),a[e].removeAttribute("srcdoc");this.l=h(this.parent);this.height=this.a.offsetHeight;c=getComputedStyle(b);c.marginLeft.slice(0,-2);c.marginRight.slice(0,-2);this.f=~~c.marginTop.slice(0,-2);this.j=~~c.marginBottom.slice(0,-2);this.restrictWithin instanceof Element?(c=h(this.restrictWithin),this.c.top=Math.max(c.top,h(b).top),this.c.bottom=
this.restrictWithin.offsetHeight+c.top):this.restrictWithin instanceof Object?this.c=this.restrictWithin:(this.c.top=h(b).top,this.c.bottom=this.l.height+this.l.top);this.offset.bottom=0;this.offset.top=0;if(this.stack.length)for(d=this.stack.length;d--;){if(c=f.stack[this.stack[d]][this.g[d]-1]){a=c.e?c.a:c.b;this.offset.top=c.offset.top+c.options.offset;if(!(e=!this.options.collapse))var e=b.offsetLeft,g=b.offsetLeft+b.offsetWidth,k=a.offsetLeft,a=a.offsetWidth+a.offsetLeft,e=g<k&&e<k||g>a&&e>a?
!1:!0;if(e)for(this.offset.top+=c.height+Math.max(c.f,c.j),a=f.stack[this.stack[d]][this.g[d]],e=this.g[d]-1;c=f.stack[this.stack[d]][e];e--)c.offset.bottom=Math.max(c.offset.bottom,a.offset.bottom+a.height+a.f+a.j),a=c}}else if(c=f.q[this.g[0]-1])c.c.bottom=this.c.top-this.f;clearTimeout(this.B);this.B=setTimeout(this.n,0)},n:function(){this.e?this.a.style.cssText=this.k:this.d?this.t(this.a):this.u(this.a);this.h()}};g?g.fn.sticky=function(b){return this.each(function(c,d){var a=g(d),e=new f(a[0],
b);a.data("sticky",e)})}:window.Sticky=f})(window.jQuery||window.Zepto);
