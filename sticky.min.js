!function(a){function b(a){for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b];for(var e in d)a[e]=d[e]}return a}function c(){var a=document.documentElement,b=document.defaultView.getComputedStyle(a,"");return b.transform?"":b["-webkit-transform"]?"-webkit-":b["-moz-transform"]?"-moz-":b["-o-transform"]?"-o-":b["-khtml-transform"]?"-khtml-":""}function d(a,b){var c,d={};for(var f in a.dataset){var c;if(b){c=a.dataset[f].split(",");for(var g=c.length;g--;)c[g]=e(c[g].trim()),""===c[g]&&(c[g]=null)}else c=e(a.dataset[f]),""===c&&(c[g]=!0);d[f]=c}return d}function e(a){return"true"===a?!0:"false"===a?!1:Number.isNaN(v=parseFloat(a))?a:v}function f(a){var b={top:0,left:0,right:0,bottom:0,width:0,height:0},c=a.getBoundingClientRect();return b.top=c.top+(window.pageYOffset||document.documentElement.scrollTop),b.left=c.left+(window.pageXOffset||document.documentElement.scrollLeft),b.width=a.offsetWidth,b.height=a.offsetHeight,b.right=window.innerWidth-c.right,b.bottom=c.bottom+Math.max(document.body.scrollHeight,document.body.offsetHeight)-(window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)),b}function g(){this.create.apply(this)}function h(){this.create.apply(this,arguments)}var i=(c(),"sticky"),j="sticky";j="sticky",g.prototype={options:{throttle:10},create:function(){this.vp={top:window.pageYOffset||document.documentElement.scrollTop,height:window.innerHeight},this.stickies=[],this.check=this.check.bind(this),this.recalc=this.recalc.bind(this),this.resize=this.resize.bind(this),this.bindObservers(),j="sticky"},bindObservers:function(){window.addEventListener("resize",this.resize),document.addEventListener("scroll",this.check),document.addEventListener("sticky:recalc",this.recalc)},check:function(){this.vp.top=window.pageYOffset||document.documentElement.scrollTop},resize:function(){clearTimeout(this._recalcInterval),this._recalcInterval=setTimeout(this.recalc,this.options.throttle)},_recalcInterval:0,recalc:function(){this.vp.height=window.innerHeight},add:function(a){return this.stickies.push(a),a.el.stickyId=this.stickies.length-1,this.resize(),a}};var k=new g;h.MODE={NONE:0,STACKED:1,MUTUALLY_EXCLUSIVE:2},h.prototype={options:{offset:0,restrictWithin:null,vAlign:"top",stickyClass:"is-stuck",stubClass:"sticky-stub",mode:h.MODE.MUTUALLY_EXCLUSIVE},create:function(a,c){this.el=a;var e=d(this.el);"string"==typeof e.restrictWithin&&(e.restrictWithin=document.body.querySelector(e.restrictWithin)),this.options=b({},this.options,e,c),"string"==typeof this.options.mode&&(this.options.mode="stacked"==this.options.mode?h.MODE.STACKED:"exclusive"==this.options.mode?h.MODE.MUTUALLY_EXCLUSIVE:h.MODE.NONE),this.monitor=k,this.monitor.add(this),this.isFixed=!1,this.isBottom=!1,this.isTop=!0,this.restrictBox={top:0,bottom:9999},this.height=0,this.parent={top:0,height:0};for(var f=this.el;null!==(f=f.previousSibling);)if(void 0!==f.stickyId){this.prevSticky=this.monitor.stickies[f.stickyId],this.prevSticky.nextSticky=this;break}this.stub=this.el.cloneNode(!0),this.stub.classList.add(this.options.stubClass),this.stub.style.visibility="hidden",this.initialStyle=this.el.style.cssText,this.stub2=this.el.cloneNode(!0),this.stubs=document.createDocumentFragment();var g=window.getComputedStyle(this.el.parentNode);"static"==g.position&&(this.el.parentNode.style.position="relative"),this.check=this.check.bind(this),this.recalc=this.recalc.bind(this),document.addEventListener("scroll",this.check),window.addEventListener("resize",function(){this.recalc(),this.check()}.bind(this)),this.recalc(),this.check()},check:function(){var a=this.monitor.vp.top;this.isFixed?(!this.isTop&&a+this.options.offset+this.height>=this.restrictBox.bottom&&this.parkBottom(),!this.isBottom&&a+this.options.offset<=this.restrictBox.top&&this.parkTop()):(this.isTop||this.isBottom)&&a+this.options.offset>this.restrictBox.top&&a+this.options.offset+this.height<this.restrictBox.bottom&&this.stick()},parkTop:function(){this.isFixed=!1,this.isTop=!0,this.isBottom=!1,this.stub=this.el.parentNode.removeChild(this.stub),this.clearMimicStyle(),this.el.classList.remove(this.options.stickyClass),j="sticky"},stick:function(){this.isBottom?this.prepareStubs(this.stub2):this.prepareStubs(this.stub,this.stub2),this.makeStickedStyle(this.stub2),this.el=this.el.parentNode.replaceChild(this.stubs,this.el),this.makeStickedStyle(this.el),this.stub2=this.stub.parentNode.replaceChild(this.el,this.stub2),this.isFixed=!0,this.isTop=!1,this.isBottom=!1,j="sticky"},prepareStubs:function(){for(var a=0;a<arguments.length;a++)this.stubs.appendChild(arguments[a])},parkBottom:function(){this.isFixed=!1,this.isBottom=!0,this.isTop=!1,this.el.classList.remove(this.options.stickyClass),this.makeParkedBottomStyle(this.el),j="sticky"},makeParkedBottomStyle:function(a){a.style.cssText="",a.style.position="absolute",a.style.top=this.restrictBox.bottom-this.parent.top-this.height+"px",a.style.width=this.stub.offsetWidth+"px"},makeStickedStyle:function(a){a.style.cssText="",a.style.position="fixed",a.style.top=this.options.offset+"px",a.classList.add(this.options.stickyClass),this.mimicStyle(a,this.stub)},recalc:function(){var a=this.isFixed?this.stub:this.el;if(this.parent=f(a.parentNode),this.height=a.offsetHeight,this.options.restrictWithin instanceof Element){var b=f(this.options.restrictWithin);this.restrictBox.top=Math.max(b.top,f(a).top),this.restrictBox.bottom=this.options.restrictWithin.offsetHeight+b.top}else this.options.restrictWithin instanceof Object?this.restrictBox=this.options.restrictWithin:(this.restrictBox.top=f(a).top,this.restrictBox.bottom=this.parent.height+this.parent.top);if(this.prevSticky&&this.options.mode===h.MODE.MUTUALLY_EXCLUSIVE&&(this.prevSticky.restrictBox.bottom=this.restrictBox.top),this.options.mode===h.MODE.STACKED&&this.prevSticky){var c=this.prevSticky.isFixed?this.prevSticky.stub:this.prevSticky.el;this.options.offset=this.prevSticky.options.offset+c.offsetHeight;for(var d=this;d=d.prevSticky;)d.restrictBox.bottom-=this.height}this.isFixed?this.mimicStyle(this.el,this.stub):this.clearMimicStyle()},mimicStyle:function(a,b){var c=getComputedStyle(b),d=f(b);a.style.width=c.width,"auto"!==c.left&&(a.style.left=d.left+"px"),"auto"!==c.right&&(a.style.right=d.right+"px")},clearMimicStyle:function(){this.el.style.cssText=this.initialStyle}},a&&(a.fn[i]=function(b){return this.each(function(c,d){var e=a(d),f=new h(e[0],b);e.data(i,f)})},a.Sticky=h)}(window.jQuery||window.Zepto);