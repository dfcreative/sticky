'use strict';(function(k){function q(a){for(var c=1,b=arguments.length;c<b;c++){var e=arguments[c],d;for(d in e)a[d]=e[d]}return a}function h(a){var c={top:0,left:0,right:0,bottom:0,width:0,height:0},b=a.getBoundingClientRect();c.top=b.top+(window.pageYOffset||document.documentElement.scrollTop);c.left=b.left+(window.pageXOffset||document.documentElement.scrollLeft);c.width=a.offsetWidth;c.height=a.offsetHeight;c.right=document.width-b.right;c.bottom=window.innerHeight+(window.pageYOffset||document.documentElement.scrollTop)-
b.bottom;return c}function l(a,c){var b=getComputedStyle(c),e=h(c),d=0,f=0;"border-box"!==b["box-sizing"]&&(d=~~b["padding-left"].slice(0,-2),f=~~b["padding-right"].slice(0,-2));a.style.width=e.width-d-f+"px";a.style.left=e.left+"px";for(e=0;e<m.length;e++)for(d=0;d<n.length;d++)f=m[e]+n[d],a.style[f]=b[f]}function g(){this.create.apply(this,arguments)}var p=["object","iframe","embed","img"],n=["left","top","right","bottom"],m=["padding-","border-"];g.list=[];g.prototype={options:{offset:0,g:null,
vAlign:"top",v:"is-stuck",w:"sticky-stub",mode:"stacked",u:!0,c:null},create:function(a,c){if(a.dataset.stickyId)return console.log("Sticky already exist");this.a=a;this.parent=this.a.parentNode;this.options=q({},this.options,a.dataset,c);this.g="string"===typeof this.options.restrictWithin?document.body.querySelector(this.options.restrictWithin):this.options.restrictWithin;this.options.offset=parseFloat(this.options.offset)||0;this.a.dataset.stickyId=g.list.length;g.list.push(this);this.f=this.j=
!1;this.e=!0;this.b={top:0,bottom:9999};this.height=0;this.k={top:0,height:0};var b=this.a;if(this.options.prevSticky)b="string"===typeof this.options.prevSticky?document.querySelector(this.options.prevSticky):this.options.prevSticky,b.dataset.stickyId&&g.list[b.dataset.stickyId]&&(this.c=g.list[b.dataset.stickyId],this.c.s=this);else for(;null!==(b=b.previousSibling);)if(1===b.nodeType&&void 0!==b.dataset.stickyId){this.c=g.list[b.dataset.stickyId];this.c.s=this;break}for(var b=this.a.cloneNode(!0),
e=0;e<p.length;e++)for(var d=b.querySelectorAll(p[e]),f=d.length;f--;)d[f].removeAttribute("src"),d[f].removeAttribute("href"),d[f].removeAttribute("rel"),d[f].removeAttribute("srcdoc"),"SCRIPT"===d[f].tagName&&d[f].parentNode.replaceChild(d[f]);this.d=b;this.d.classList.add(this.options.stubClass);this.d.style.visibility="hidden";this.d.style.display="none";this.parent.insertBefore(this.d,this.a);this.i=this.a.style.cssText;this.r=getComputedStyle(this.a).display;"static"==window.getComputedStyle(this.parent).position&&
(this.parent.style.position="relative");this.h=this.h.bind(this);this.recalc=this.recalc.bind(this);this.l=this.l.bind(this);this.recalc();document.addEventListener("scroll",this.h);window.addEventListener("resize",this.recalc);document.addEventListener("sticky:recalc",this.recalc)},h:function(){var a=window.pageYOffset||document.documentElement.scrollTop;this.j?(!this.e&&a+this.options.offset+this.height>=this.b.bottom&&this.o(),!this.f&&a+this.options.offset<=this.b.top&&this.t()):(this.e||this.f)&&
a+this.options.offset>this.b.top&&(a+this.options.offset+this.height<this.b.bottom?this.p():this.f||(this.p(),this.o()))},t:function(){this.a.style.cssText=this.i;this.a.classList.remove(this.options.stickyClass);this.d.style.display="none";this.j=!1;this.e=!0;this.f=!1},p:function(){this.d.style.display=this.r;this.n(this.a);this.j=!0;this.f=this.e=!1},o:function(){this.a.classList.remove(this.options.stickyClass);this.m(this.a);this.j=!1;this.f=!0;this.e=!1},m:function(a){a.style.cssText=this.i;
a.style.position="absolute";a.style.top=this.b.bottom-this.k.top-this.height+"px";l(a,this.d);a.style.left=this.d.offsetLeft+"px"},n:function(a,c){a.style.cssText=this.i;a.style.position="fixed";a.style.top=this.options.offset+"px";a.classList.add(this.options.stickyClass);l(a,c||this.d)},recalc:function(){var a=this.e?this.a:this.d;this.k=h(this.parent);this.height=a.offsetHeight;if(this.g instanceof Element){var c=h(this.g);this.b.top=Math.max(c.top,h(a).top);this.b.bottom=this.g.offsetHeight+c.top}else this.g instanceof
Object?this.b=this.g:(this.b.top=h(a).top,this.b.bottom=this.k.height+this.k.top);if(this.c)if("exclusive"===this.options.mode)this.c.b.bottom=this.b.top;else if("stacked"===this.options.mode){var c=this.c.e?this.c.a:this.c.d,b;if(b=this.options.collapseStacked){b=a.offsetLeft;var a=a.offsetLeft+a.offsetWidth,e=c.offsetLeft,d=c.offsetWidth+c.offsetLeft;b=!!(a<e&&b<e||a>d&&b>d)}if(b)this.options.offset=this.c.options.offset;else for(this.options.offset=this.c.options.offset+c.offsetHeight,c=this;c=
c.c;)c.b.bottom-=this.height}clearTimeout(this.q);this.q=setTimeout(this.l,0)},l:function(){this.e?this.a.style.cssText=this.i:this.f?this.m(this.a):this.n(this.a);this.h()}};k?k.fn.sticky=function(a){return this.each(function(c,b){var e=k(b),d=new g(e[0],a);e.data("sticky",d)})}:window.Sticky=g})(window.jQuery||window.Zepto);
